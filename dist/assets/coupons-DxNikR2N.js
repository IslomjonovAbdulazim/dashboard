import{r as R,j as r,c as Y,k as yt,B as y,f as Me,t as T,o as Ze,n as de,h as Xe,s as ge,l as $t,_ as ue}from"./index-Dnu0Bgby.js";import{u as Qe,T as Vt,M as Mt}from"./top-nav-2e48x5du.js";import{d as Pt,u as Dt,a as It,H as Nt,S as Et,T as Lt,C as At,P as Ht}from"./config-drawer-Cowk_Gap.js";import{C as q,d as b,a as X,b as Q}from"./card-n5iZIFOF.js";import{b as K}from"./zehnly-auth-api-VkkSNVd5.js";import{u as Pe,E as Gt,S as We,T as zt,F as Ye,a as V,b as M,c as P,d as D,e as I}from"./form-BEokDOGj.js";import{B as ae}from"./badge-DNPbFYhf.js";import{Q as Tt,R as Ot,T as Bt,V as kt,W as Oe,Y as Be,Z as Ut,D as Je,_ as qt,k as et,l as tt,m as nt,$ as bt,a0 as Re,U as ot,j as Kt,n as pe,E as st,a1 as Zt,F as rt,G as it,H as lt,I as at,K as ut}from"./dropdown-menu-CE6iJ6hN.js";import{T as Xt,a as Qt,b as se,c as Wt,d as Yt,e as fe}from"./table-Cy6VbgtI.js";import{S as J,a as ee,b as te,c as ne,d as G}from"./select-CVp1mswn.js";import{I as A,u as ct,a as dt}from"./input-DyoYhQOZ.js";import{P as De,a as Ie,b as Ne}from"./popover-15zTxo4l.js";import{C as ke}from"./copy-CrDL6qBZ.js";import{c as Jt}from"./createLucideIcon-C22T9wte.js";import{D as Ue}from"./dollar-sign-P9Pa-gMG.js";import{C as Ee}from"./calendar-CUjNuKPq.js";import{f as Le}from"./format-Dp3w_Y3x.js";import{S as gt}from"./switch-smYDwMis.js";import{C as pt}from"./calendar-DKWCyUCG.js";import{P as en}from"./plus-BOpDm2i4.js";import{T as tn}from"./trending-up-DMpoFpL1.js";import"./label-FDMgKiBQ.js";import"./chevron-down-DURiuMNq.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],je=Jt("percent",nn),oe={list:async()=>(await K.get("/coupons")).data.data,get:async e=>(await K.get(`/coupons/${e}`)).data.data,create:async e=>(await K.post("/coupons",e)).data.data,update:async(e,o)=>(await K.put(`/coupons/${e}`,o)).data.data,delete:async e=>(await K.delete(`/coupons/${e}`)).data.data};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function O(e,o){return typeof e=="function"?e(o):e}function N(e,o){return t=>{o.setState(n=>({...n,[e]:O(t,n[e])}))}}function ce(e){return e instanceof Function}function on(e){return Array.isArray(e)&&e.every(o=>typeof o=="number")}function sn(e,o){const t=[],n=s=>{s.forEach(i=>{t.push(i);const a=o(i);a!=null&&a.length&&n(a)})};return n(e),t}function x(e,o,t){let n=[],s;return i=>{let a;t.key&&t.debug&&(a=Date.now());const l=e(i);if(!(l.length!==n.length||l.some((p,h)=>n[h]!==p)))return s;n=l;let d;if(t.key&&t.debug&&(d=Date.now()),s=o(...l),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const p=Math.round((Date.now()-a)*100)/100,h=Math.round((Date.now()-d)*100)/100,g=h/16,c=(f,m)=>{for(f=String(f);f.length<m;)f=" "+f;return f};console.info(`%câ± ${c(h,5)} /${c(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t?.key)}return s}}function C(e,o,t,n){return{debug:()=>{var s;return(s=e?.debugAll)!=null?s:e[o]},key:!1,onChange:n}}function rn(e,o,t,n){const s=()=>{var a;return(a=i.getValue())!=null?a:e.options.renderFallbackValue},i={id:`${o.id}_${t.id}`,row:o,column:t,getValue:()=>o.getValue(n),renderValue:s,getContext:x(()=>[e,t,o,i],(a,l,u,d)=>({table:a,column:l,row:u,cell:d,getValue:d.getValue,renderValue:d.renderValue}),C(e.options,"debugCells"))};return e._features.forEach(a=>{a.createCell==null||a.createCell(i,t,o,e)},{}),i}function ln(e,o,t,n){var s,i;const l={...e._getDefaultColumnDef(),...o},u=l.accessorKey;let d=(s=(i=l.id)!=null?i:u?typeof String.prototype.replaceAll=="function"?u.replaceAll(".","_"):u.replace(/\./g,"_"):void 0)!=null?s:typeof l.header=="string"?l.header:void 0,p;if(l.accessorFn?p=l.accessorFn:u&&(u.includes(".")?p=g=>{let c=g;for(const m of u.split(".")){var f;c=(f=c)==null?void 0:f[m]}return c}:p=g=>g[l.accessorKey]),!d)throw new Error;let h={id:`${String(d)}`,accessorFn:p,parent:n,depth:t,columnDef:l,columns:[],getFlatColumns:x(()=>[!0],()=>{var g;return[h,...(g=h.columns)==null?void 0:g.flatMap(c=>c.getFlatColumns())]},C(e.options,"debugColumns")),getLeafColumns:x(()=>[e._getOrderColumnsFn()],g=>{var c;if((c=h.columns)!=null&&c.length){let f=h.columns.flatMap(m=>m.getLeafColumns());return g(f)}return[h]},C(e.options,"debugColumns"))};for(const g of e._features)g.createColumn==null||g.createColumn(h,e);return h}const $="debugHeaders";function qe(e,o,t){var n;let i={id:(n=t.id)!=null?n:o.id,column:o,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],l=u=>{u.subHeaders&&u.subHeaders.length&&u.subHeaders.map(l),a.push(u)};return l(i),a},getContext:()=>({table:e,header:i,column:o})};return e._features.forEach(a=>{a.createHeader==null||a.createHeader(i,e)}),i}const an={createTable:e=>{e.getHeaderGroups=x(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n,s)=>{var i,a;const l=(i=n?.map(h=>t.find(g=>g.id===h)).filter(Boolean))!=null?i:[],u=(a=s?.map(h=>t.find(g=>g.id===h)).filter(Boolean))!=null?a:[],d=t.filter(h=>!(n!=null&&n.includes(h.id))&&!(s!=null&&s.includes(h.id)));return re(o,[...l,...d,...u],e)},C(e.options,$)),e.getCenterHeaderGroups=x(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n,s)=>(t=t.filter(i=>!(n!=null&&n.includes(i.id))&&!(s!=null&&s.includes(i.id))),re(o,t,e,"center")),C(e.options,$)),e.getLeftHeaderGroups=x(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(o,t,n)=>{var s;const i=(s=n?.map(a=>t.find(l=>l.id===a)).filter(Boolean))!=null?s:[];return re(o,i,e,"left")},C(e.options,$)),e.getRightHeaderGroups=x(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(o,t,n)=>{var s;const i=(s=n?.map(a=>t.find(l=>l.id===a)).filter(Boolean))!=null?s:[];return re(o,i,e,"right")},C(e.options,$)),e.getFooterGroups=x(()=>[e.getHeaderGroups()],o=>[...o].reverse(),C(e.options,$)),e.getLeftFooterGroups=x(()=>[e.getLeftHeaderGroups()],o=>[...o].reverse(),C(e.options,$)),e.getCenterFooterGroups=x(()=>[e.getCenterHeaderGroups()],o=>[...o].reverse(),C(e.options,$)),e.getRightFooterGroups=x(()=>[e.getRightHeaderGroups()],o=>[...o].reverse(),C(e.options,$)),e.getFlatHeaders=x(()=>[e.getHeaderGroups()],o=>o.map(t=>t.headers).flat(),C(e.options,$)),e.getLeftFlatHeaders=x(()=>[e.getLeftHeaderGroups()],o=>o.map(t=>t.headers).flat(),C(e.options,$)),e.getCenterFlatHeaders=x(()=>[e.getCenterHeaderGroups()],o=>o.map(t=>t.headers).flat(),C(e.options,$)),e.getRightFlatHeaders=x(()=>[e.getRightHeaderGroups()],o=>o.map(t=>t.headers).flat(),C(e.options,$)),e.getCenterLeafHeaders=x(()=>[e.getCenterFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),C(e.options,$)),e.getLeftLeafHeaders=x(()=>[e.getLeftFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),C(e.options,$)),e.getRightLeafHeaders=x(()=>[e.getRightFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),C(e.options,$)),e.getLeafHeaders=x(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(o,t,n)=>{var s,i,a,l,u,d;return[...(s=(i=o[0])==null?void 0:i.headers)!=null?s:[],...(a=(l=t[0])==null?void 0:l.headers)!=null?a:[],...(u=(d=n[0])==null?void 0:d.headers)!=null?u:[]].map(p=>p.getLeafHeaders()).flat()},C(e.options,$))}};function re(e,o,t,n){var s,i;let a=0;const l=function(g,c){c===void 0&&(c=1),a=Math.max(a,c),g.filter(f=>f.getIsVisible()).forEach(f=>{var m;(m=f.columns)!=null&&m.length&&l(f.columns,c+1)},0)};l(e);let u=[];const d=(g,c)=>{const f={depth:c,id:[n,`${c}`].filter(Boolean).join("_"),headers:[]},m=[];g.forEach(v=>{const w=[...m].reverse()[0],F=v.column.depth===f.depth;let _,E=!1;if(F&&v.column.parent?_=v.column.parent:(_=v.column,E=!0),w&&w?.column===_)w.subHeaders.push(v);else{const j=qe(t,_,{id:[n,c,_.id,v?.id].filter(Boolean).join("_"),isPlaceholder:E,placeholderId:E?`${m.filter(S=>S.column===_).length}`:void 0,depth:c,index:m.length});j.subHeaders.push(v),m.push(j)}f.headers.push(v),v.headerGroup=f}),u.push(f),c>0&&d(m,c-1)},p=o.map((g,c)=>qe(t,g,{depth:a,index:c}));d(p,a-1),u.reverse();const h=g=>g.filter(f=>f.column.getIsVisible()).map(f=>{let m=0,v=0,w=[0];f.subHeaders&&f.subHeaders.length?(w=[],h(f.subHeaders).forEach(_=>{let{colSpan:E,rowSpan:j}=_;m+=E,w.push(j)})):m=1;const F=Math.min(...w);return v=v+F,f.colSpan=m,f.rowSpan=v,{colSpan:m,rowSpan:v}});return h((s=(i=u[0])==null?void 0:i.headers)!=null?s:[]),u}const Ae=(e,o,t,n,s,i,a)=>{let l={id:o,index:n,original:t,depth:s,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:u=>{if(l._valuesCache.hasOwnProperty(u))return l._valuesCache[u];const d=e.getColumn(u);if(d!=null&&d.accessorFn)return l._valuesCache[u]=d.accessorFn(l.original,n),l._valuesCache[u]},getUniqueValues:u=>{if(l._uniqueValuesCache.hasOwnProperty(u))return l._uniqueValuesCache[u];const d=e.getColumn(u);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(l._uniqueValuesCache[u]=d.columnDef.getUniqueValues(l.original,n),l._uniqueValuesCache[u]):(l._uniqueValuesCache[u]=[l.getValue(u)],l._uniqueValuesCache[u])},renderValue:u=>{var d;return(d=l.getValue(u))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>sn(l.subRows,u=>u.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let u=[],d=l;for(;;){const p=d.getParentRow();if(!p)break;u.push(p),d=p}return u.reverse()},getAllCells:x(()=>[e.getAllLeafColumns()],u=>u.map(d=>rn(e,l,d,d.id)),C(e.options,"debugRows")),_getAllCellsByColumnId:x(()=>[l.getAllCells()],u=>u.reduce((d,p)=>(d[p.column.id]=p,d),{}),C(e.options,"debugRows"))};for(let u=0;u<e._features.length;u++){const d=e._features[u];d==null||d.createRow==null||d.createRow(l,e)}return l},un={createColumn:(e,o)=>{e._getFacetedRowModel=o.options.getFacetedRowModel&&o.options.getFacetedRowModel(o,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():o.getPreFilteredRowModel(),e._getFacetedUniqueValues=o.options.getFacetedUniqueValues&&o.options.getFacetedUniqueValues(o,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=o.options.getFacetedMinMaxValues&&o.options.getFacetedMinMaxValues(o,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},ft=(e,o,t)=>{var n,s;const i=t==null||(n=t.toString())==null?void 0:n.toLowerCase();return!!(!((s=e.getValue(o))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};ft.autoRemove=e=>L(e);const mt=(e,o,t)=>{var n;return!!(!((n=e.getValue(o))==null||(n=n.toString())==null)&&n.includes(t))};mt.autoRemove=e=>L(e);const ht=(e,o,t)=>{var n;return((n=e.getValue(o))==null||(n=n.toString())==null?void 0:n.toLowerCase())===t?.toLowerCase()};ht.autoRemove=e=>L(e);const xt=(e,o,t)=>{var n;return(n=e.getValue(o))==null?void 0:n.includes(t)};xt.autoRemove=e=>L(e);const Ct=(e,o,t)=>!t.some(n=>{var s;return!((s=e.getValue(o))!=null&&s.includes(n))});Ct.autoRemove=e=>L(e)||!(e!=null&&e.length);const vt=(e,o,t)=>t.some(n=>{var s;return(s=e.getValue(o))==null?void 0:s.includes(n)});vt.autoRemove=e=>L(e)||!(e!=null&&e.length);const wt=(e,o,t)=>e.getValue(o)===t;wt.autoRemove=e=>L(e);const St=(e,o,t)=>e.getValue(o)==t;St.autoRemove=e=>L(e);const He=(e,o,t)=>{let[n,s]=t;const i=e.getValue(o);return i>=n&&i<=s};He.resolveFilterValue=e=>{let[o,t]=e,n=typeof o!="number"?parseFloat(o):o,s=typeof t!="number"?parseFloat(t):t,i=o===null||Number.isNaN(n)?-1/0:n,a=t===null||Number.isNaN(s)?1/0:s;if(i>a){const l=i;i=a,a=l}return[i,a]};He.autoRemove=e=>L(e)||L(e[0])&&L(e[1]);const H={includesString:ft,includesStringSensitive:mt,equalsString:ht,arrIncludes:xt,arrIncludesAll:Ct,arrIncludesSome:vt,equals:wt,weakEquals:St,inNumberRange:He};function L(e){return e==null||e===""}const cn={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:N("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,o)=>{e.getAutoFilterFn=()=>{const t=o.getCoreRowModel().flatRows[0],n=t?.getValue(e.id);return typeof n=="string"?H.includesString:typeof n=="number"?H.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?H.equals:Array.isArray(n)?H.arrIncludes:H.weakEquals},e.getFilterFn=()=>{var t,n;return ce(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(n=o.options.filterFns)==null?void 0:n[e.columnDef.filterFn])!=null?t:H[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,n,s;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((n=o.options.enableColumnFilters)!=null?n:!0)&&((s=o.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=o.getState().columnFilters)==null||(t=t.find(n=>n.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,n;return(t=(n=o.getState().columnFilters)==null?void 0:n.findIndex(s=>s.id===e.id))!=null?t:-1},e.setFilterValue=t=>{o.setColumnFilters(n=>{const s=e.getFilterFn(),i=n?.find(p=>p.id===e.id),a=O(t,i?i.value:void 0);if(be(s,a,e)){var l;return(l=n?.filter(p=>p.id!==e.id))!=null?l:[]}const u={id:e.id,value:a};if(i){var d;return(d=n?.map(p=>p.id===e.id?u:p))!=null?d:[]}return n!=null&&n.length?[...n,u]:[u]})}},createRow:(e,o)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=o=>{const t=e.getAllLeafColumns(),n=s=>{var i;return(i=O(o,s))==null?void 0:i.filter(a=>{const l=t.find(u=>u.id===a.id);if(l){const u=l.getFilterFn();if(be(u,a.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(n)},e.resetColumnFilters=o=>{var t,n;e.setColumnFilters(o?[]:(t=(n=e.initialState)==null?void 0:n.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function be(e,o,t){return(e&&e.autoRemove?e.autoRemove(o,t):!1)||typeof o>"u"||typeof o=="string"&&!o}const dn=(e,o,t)=>t.reduce((n,s)=>{const i=s.getValue(e);return n+(typeof i=="number"?i:0)},0),gn=(e,o,t)=>{let n;return t.forEach(s=>{const i=s.getValue(e);i!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}),n},pn=(e,o,t)=>{let n;return t.forEach(s=>{const i=s.getValue(e);i!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}),n},fn=(e,o,t)=>{let n,s;return t.forEach(i=>{const a=i.getValue(e);a!=null&&(n===void 0?a>=a&&(n=s=a):(n>a&&(n=a),s<a&&(s=a)))}),[n,s]},mn=(e,o)=>{let t=0,n=0;if(o.forEach(s=>{let i=s.getValue(e);i!=null&&(i=+i)>=i&&(++t,n+=i)}),t)return n/t},hn=(e,o)=>{if(!o.length)return;const t=o.map(i=>i.getValue(e));if(!on(t))return;if(t.length===1)return t[0];const n=Math.floor(t.length/2),s=t.sort((i,a)=>i-a);return t.length%2!==0?s[n]:(s[n-1]+s[n])/2},xn=(e,o)=>Array.from(new Set(o.map(t=>t.getValue(e))).values()),Cn=(e,o)=>new Set(o.map(t=>t.getValue(e))).size,vn=(e,o)=>o.length,me={sum:dn,min:gn,max:pn,extent:fn,mean:mn,median:hn,unique:xn,uniqueCount:Cn,count:vn},wn={getDefaultColumnDef:()=>({aggregatedCell:e=>{var o,t;return(o=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?o:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:N("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,o)=>{e.toggleGrouping=()=>{o.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(n=>n!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,n;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((n=o.options.enableGrouping)!=null?n:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=o.getCoreRowModel().flatRows[0],n=t?.getValue(e.id);if(typeof n=="number")return me.sum;if(Object.prototype.toString.call(n)==="[object Date]")return me.extent},e.getAggregationFn=()=>{var t,n;if(!e)throw new Error;return ce(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(n=o.options.aggregationFns)==null?void 0:n[e.columnDef.aggregationFn])!=null?t:me[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=o=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(o),e.resetGrouping=o=>{var t,n;e.setGrouping(o?[]:(t=(n=e.initialState)==null?void 0:n.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,o)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const n=o.getColumn(t);return n!=null&&n.columnDef.getGroupingValue?(e._groupingValuesCache[t]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,o,t,n)=>{e.getIsGrouped=()=>o.getIsGrouped()&&o.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&o.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function Sn(e,o,t){if(!(o!=null&&o.length)||!t)return e;const n=e.filter(i=>!o.includes(i.id));return t==="remove"?n:[...o.map(i=>e.find(a=>a.id===i)).filter(Boolean),...n]}const Rn={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:N("columnOrder",e)}),createColumn:(e,o)=>{e.getIndex=x(t=>[W(o,t)],t=>t.findIndex(n=>n.id===e.id),C(o.options,"debugColumns")),e.getIsFirstColumn=t=>{var n;return((n=W(o,t)[0])==null?void 0:n.id)===e.id},e.getIsLastColumn=t=>{var n;const s=W(o,t);return((n=s[s.length-1])==null?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=o=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(o),e.resetColumnOrder=o=>{var t;e.setColumnOrder(o?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=x(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(o,t,n)=>s=>{let i=[];if(!(o!=null&&o.length))i=s;else{const a=[...o],l=[...s];for(;l.length&&a.length;){const u=a.shift(),d=l.findIndex(p=>p.id===u);d>-1&&i.push(l.splice(d,1)[0])}i=[...i,...l]}return Sn(i,t,n)},C(e.options,"debugTable"))}},he=()=>({left:[],right:[]}),jn={getInitialState:e=>({columnPinning:he(),...e}),getDefaultOptions:e=>({onColumnPinningChange:N("columnPinning",e)}),createColumn:(e,o)=>{e.pin=t=>{const n=e.getLeafColumns().map(s=>s.id).filter(Boolean);o.setColumnPinning(s=>{var i,a;if(t==="right"){var l,u;return{left:((l=s?.left)!=null?l:[]).filter(h=>!(n!=null&&n.includes(h))),right:[...((u=s?.right)!=null?u:[]).filter(h=>!(n!=null&&n.includes(h))),...n]}}if(t==="left"){var d,p;return{left:[...((d=s?.left)!=null?d:[]).filter(h=>!(n!=null&&n.includes(h))),...n],right:((p=s?.right)!=null?p:[]).filter(h=>!(n!=null&&n.includes(h)))}}return{left:((i=s?.left)!=null?i:[]).filter(h=>!(n!=null&&n.includes(h))),right:((a=s?.right)!=null?a:[]).filter(h=>!(n!=null&&n.includes(h)))}})},e.getCanPin=()=>e.getLeafColumns().some(n=>{var s,i,a;return((s=n.columnDef.enablePinning)!=null?s:!0)&&((i=(a=o.options.enableColumnPinning)!=null?a:o.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(l=>l.id),{left:n,right:s}=o.getState().columnPinning,i=t.some(l=>n?.includes(l)),a=t.some(l=>s?.includes(l));return i?"left":a?"right":!1},e.getPinnedIndex=()=>{var t,n;const s=e.getIsPinned();return s?(t=(n=o.getState().columnPinning)==null||(n=n[s])==null?void 0:n.indexOf(e.id))!=null?t:-1:0}},createRow:(e,o)=>{e.getCenterVisibleCells=x(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left,o.getState().columnPinning.right],(t,n,s)=>{const i=[...n??[],...s??[]];return t.filter(a=>!i.includes(a.column.id))},C(o.options,"debugRows")),e.getLeftVisibleCells=x(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left],(t,n)=>(n??[]).map(i=>t.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),C(o.options,"debugRows")),e.getRightVisibleCells=x(()=>[e._getAllVisibleCells(),o.getState().columnPinning.right],(t,n)=>(n??[]).map(i=>t.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),C(o.options,"debugRows"))},createTable:e=>{e.setColumnPinning=o=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(o),e.resetColumnPinning=o=>{var t,n;return e.setColumnPinning(o?he():(t=(n=e.initialState)==null?void 0:n.columnPinning)!=null?t:he())},e.getIsSomeColumnsPinned=o=>{var t;const n=e.getState().columnPinning;if(!o){var s,i;return!!((s=n.left)!=null&&s.length||(i=n.right)!=null&&i.length)}return!!((t=n[o])!=null&&t.length)},e.getLeftLeafColumns=x(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(o,t)=>(t??[]).map(n=>o.find(s=>s.id===n)).filter(Boolean),C(e.options,"debugColumns")),e.getRightLeafColumns=x(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(o,t)=>(t??[]).map(n=>o.find(s=>s.id===n)).filter(Boolean),C(e.options,"debugColumns")),e.getCenterLeafColumns=x(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n)=>{const s=[...t??[],...n??[]];return o.filter(i=>!s.includes(i.id))},C(e.options,"debugColumns"))}};function Fn(e){return e||(typeof document<"u"?document:null)}const ie={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},xe=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),_n={getDefaultColumnDef:()=>ie,getInitialState:e=>({columnSizing:{},columnSizingInfo:xe(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:N("columnSizing",e),onColumnSizingInfoChange:N("columnSizingInfo",e)}),createColumn:(e,o)=>{e.getSize=()=>{var t,n,s;const i=o.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:ie.minSize,(n=i??e.columnDef.size)!=null?n:ie.size),(s=e.columnDef.maxSize)!=null?s:ie.maxSize)},e.getStart=x(t=>[t,W(o,t),o.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((s,i)=>s+i.getSize(),0),C(o.options,"debugColumns")),e.getAfter=x(t=>[t,W(o,t),o.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((s,i)=>s+i.getSize(),0),C(o.options,"debugColumns")),e.resetSize=()=>{o.setColumnSizing(t=>{let{[e.id]:n,...s}=t;return s})},e.getCanResize=()=>{var t,n;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((n=o.options.enableColumnResizing)!=null?n:!0)},e.getIsResizing=()=>o.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,o)=>{e.getSize=()=>{let t=0;const n=s=>{if(s.subHeaders.length)s.subHeaders.forEach(n);else{var i;t+=(i=s.column.getSize())!=null?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const n=o.getColumn(e.column.id),s=n?.getCanResize();return i=>{if(!n||!s||(i.persist==null||i.persist(),Ce(i)&&i.touches&&i.touches.length>1))return;const a=e.getSize(),l=e?e.getLeafHeaders().map(w=>[w.column.id,w.column.getSize()]):[[n.id,n.getSize()]],u=Ce(i)?Math.round(i.touches[0].clientX):i.clientX,d={},p=(w,F)=>{typeof F=="number"&&(o.setColumnSizingInfo(_=>{var E,j;const S=o.options.columnResizeDirection==="rtl"?-1:1,z=(F-((E=_?.startOffset)!=null?E:0))*S,U=Math.max(z/((j=_?.startSize)!=null?j:0),-.999999);return _.columnSizingStart.forEach(Ft=>{let[_t,Te]=Ft;d[_t]=Math.round(Math.max(Te+Te*U,0)*100)/100}),{..._,deltaOffset:z,deltaPercentage:U}}),(o.options.columnResizeMode==="onChange"||w==="end")&&o.setColumnSizing(_=>({..._,...d})))},h=w=>p("move",w),g=w=>{p("end",w),o.setColumnSizingInfo(F=>({...F,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},c=Fn(t),f={moveHandler:w=>h(w.clientX),upHandler:w=>{c?.removeEventListener("mousemove",f.moveHandler),c?.removeEventListener("mouseup",f.upHandler),g(w.clientX)}},m={moveHandler:w=>(w.cancelable&&(w.preventDefault(),w.stopPropagation()),h(w.touches[0].clientX),!1),upHandler:w=>{var F;c?.removeEventListener("touchmove",m.moveHandler),c?.removeEventListener("touchend",m.upHandler),w.cancelable&&(w.preventDefault(),w.stopPropagation()),g((F=w.touches[0])==null?void 0:F.clientX)}},v=yn()?{passive:!1}:!1;Ce(i)?(c?.addEventListener("touchmove",m.moveHandler,v),c?.addEventListener("touchend",m.upHandler,v)):(c?.addEventListener("mousemove",f.moveHandler,v),c?.addEventListener("mouseup",f.upHandler,v)),o.setColumnSizingInfo(w=>({...w,startOffset:u,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:n.id}))}}},createTable:e=>{e.setColumnSizing=o=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(o),e.setColumnSizingInfo=o=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(o),e.resetColumnSizing=o=>{var t;e.setColumnSizing(o?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=o=>{var t;e.setColumnSizingInfo(o?xe():(t=e.initialState.columnSizingInfo)!=null?t:xe())},e.getTotalSize=()=>{var o,t;return(o=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?o:0},e.getLeftTotalSize=()=>{var o,t;return(o=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?o:0},e.getCenterTotalSize=()=>{var o,t;return(o=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?o:0},e.getRightTotalSize=()=>{var o,t;return(o=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?o:0}}};let le=null;function yn(){if(typeof le=="boolean")return le;let e=!1;try{const o={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,o),window.removeEventListener("test",t)}catch{e=!1}return le=e,le}function Ce(e){return e.type==="touchstart"}const $n={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:N("columnVisibility",e)}),createColumn:(e,o)=>{e.toggleVisibility=t=>{e.getCanHide()&&o.setColumnVisibility(n=>({...n,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,n;const s=e.columns;return(t=s.length?s.some(i=>i.getIsVisible()):(n=o.getState().columnVisibility)==null?void 0:n[e.id])!=null?t:!0},e.getCanHide=()=>{var t,n;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((n=o.options.enableHiding)!=null?n:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,o)=>{e._getAllVisibleCells=x(()=>[e.getAllCells(),o.getState().columnVisibility],t=>t.filter(n=>n.column.getIsVisible()),C(o.options,"debugRows")),e.getVisibleCells=x(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,n,s)=>[...t,...n,...s],C(o.options,"debugRows"))},createTable:e=>{const o=(t,n)=>x(()=>[n(),n().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),C(e.options,"debugColumns"));e.getVisibleFlatColumns=o("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=o("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=o("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=o("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=o("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:(n=e.initialState.columnVisibility)!=null?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=(n=t)!=null?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:t||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible((n=t.target)==null?void 0:n.checked)}}};function W(e,o){return o?o==="center"?e.getCenterVisibleLeafColumns():o==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Vn={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Mn={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:N("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:o=>{var t;const n=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[o.id])==null?void 0:t.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(e,o)=>{e.getCanGlobalFilter=()=>{var t,n,s,i;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((n=o.options.enableGlobalFilter)!=null?n:!0)&&((s=o.options.enableFilters)!=null?s:!0)&&((i=o.options.getColumnCanGlobalFilter==null?void 0:o.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>H.includesString,e.getGlobalFilterFn=()=>{var o,t;const{globalFilterFn:n}=e.options;return ce(n)?n:n==="auto"?e.getGlobalAutoFilterFn():(o=(t=e.options.filterFns)==null?void 0:t[n])!=null?o:H[n]},e.setGlobalFilter=o=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(o)},e.resetGlobalFilter=o=>{e.setGlobalFilter(o?void 0:e.initialState.globalFilter)}}},Pn={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:N("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let o=!1,t=!1;e._autoResetExpanded=()=>{var n,s;if(!o){e._queue(()=>{o=!0});return}if((n=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?n:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=n=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(n),e.toggleAllRowsExpanded=n=>{n??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=n=>{var s,i;e.setExpanded(n?{}:(s=(i=e.initialState)==null?void 0:i.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const n=e.getState().expanded;return n===!0||Object.values(n).some(Boolean)},e.getIsAllRowsExpanded=()=>{const n=e.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let n=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const a=i.split(".");n=Math.max(n,a.length)}),n},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,o)=>{e.toggleExpanded=t=>{o.setExpanded(n=>{var s;const i=n===!0?!0:!!(n!=null&&n[e.id]);let a={};if(n===!0?Object.keys(o.getRowModel().rowsById).forEach(l=>{a[l]=!0}):a=n,t=(s=t)!=null?s:!i,!i&&t)return{...a,[e.id]:!0};if(i&&!t){const{[e.id]:l,...u}=a;return u}return n})},e.getIsExpanded=()=>{var t;const n=o.getState().expanded;return!!((t=o.options.getIsRowExpanded==null?void 0:o.options.getIsRowExpanded(e))!=null?t:n===!0||n?.[e.id])},e.getCanExpand=()=>{var t,n,s;return(t=o.options.getRowCanExpand==null?void 0:o.options.getRowCanExpand(e))!=null?t:((n=o.options.enableExpanding)!=null?n:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let t=!0,n=e;for(;t&&n.parentId;)n=o.getRow(n.parentId,!0),t=n.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},Fe=0,_e=10,ve=()=>({pageIndex:Fe,pageSize:_e}),Dn={getInitialState:e=>({...e,pagination:{...ve(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:N("pagination",e)}),createTable:e=>{let o=!1,t=!1;e._autoResetPageIndex=()=>{var n,s;if(!o){e._queue(()=>{o=!0});return}if((n=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?n:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=n=>{const s=i=>O(n,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=n=>{var s;e.setPagination(n?ve():(s=e.initialState.pagination)!=null?s:ve())},e.setPageIndex=n=>{e.setPagination(s=>{let i=O(n,s.pageIndex);const a=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,a)),{...s,pageIndex:i}})},e.resetPageIndex=n=>{var s,i;e.setPageIndex(n?Fe:(s=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Fe)},e.resetPageSize=n=>{var s,i;e.setPageSize(n?_e:(s=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:_e)},e.setPageSize=n=>{e.setPagination(s=>{const i=Math.max(1,O(n,s.pageSize)),a=s.pageSize*s.pageIndex,l=Math.floor(a/i);return{...s,pageIndex:l,pageSize:i}})},e.setPageCount=n=>e.setPagination(s=>{var i;let a=O(n,(i=e.options.pageCount)!=null?i:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...s,pageCount:a}}),e.getPageOptions=x(()=>[e.getPageCount()],n=>{let s=[];return n&&n>0&&(s=[...new Array(n)].fill(null).map((i,a)=>a)),s},C(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:n}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:n<s-1},e.previousPage=()=>e.setPageIndex(n=>n-1),e.nextPage=()=>e.setPageIndex(n=>n+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var n;return(n=e.options.pageCount)!=null?n:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var n;return(n=e.options.rowCount)!=null?n:e.getPrePaginationRowModel().rows.length}}},we=()=>({top:[],bottom:[]}),In={getInitialState:e=>({rowPinning:we(),...e}),getDefaultOptions:e=>({onRowPinningChange:N("rowPinning",e)}),createRow:(e,o)=>{e.pin=(t,n,s)=>{const i=n?e.getLeafRows().map(u=>{let{id:d}=u;return d}):[],a=s?e.getParentRows().map(u=>{let{id:d}=u;return d}):[],l=new Set([...a,e.id,...i]);o.setRowPinning(u=>{var d,p;if(t==="bottom"){var h,g;return{top:((h=u?.top)!=null?h:[]).filter(m=>!(l!=null&&l.has(m))),bottom:[...((g=u?.bottom)!=null?g:[]).filter(m=>!(l!=null&&l.has(m))),...Array.from(l)]}}if(t==="top"){var c,f;return{top:[...((c=u?.top)!=null?c:[]).filter(m=>!(l!=null&&l.has(m))),...Array.from(l)],bottom:((f=u?.bottom)!=null?f:[]).filter(m=>!(l!=null&&l.has(m)))}}return{top:((d=u?.top)!=null?d:[]).filter(m=>!(l!=null&&l.has(m))),bottom:((p=u?.bottom)!=null?p:[]).filter(m=>!(l!=null&&l.has(m)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:n,enablePinning:s}=o.options;return typeof n=="function"?n(e):(t=n??s)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:n,bottom:s}=o.getState().rowPinning,i=t.some(l=>n?.includes(l)),a=t.some(l=>s?.includes(l));return i?"top":a?"bottom":!1},e.getPinnedIndex=()=>{var t,n;const s=e.getIsPinned();if(!s)return-1;const i=(t=s==="top"?o.getTopRows():o.getBottomRows())==null?void 0:t.map(a=>{let{id:l}=a;return l});return(n=i?.indexOf(e.id))!=null?n:-1}},createTable:e=>{e.setRowPinning=o=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(o),e.resetRowPinning=o=>{var t,n;return e.setRowPinning(o?we():(t=(n=e.initialState)==null?void 0:n.rowPinning)!=null?t:we())},e.getIsSomeRowsPinned=o=>{var t;const n=e.getState().rowPinning;if(!o){var s,i;return!!((s=n.top)!=null&&s.length||(i=n.bottom)!=null&&i.length)}return!!((t=n[o])!=null&&t.length)},e._getPinnedRows=(o,t,n)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(t??[]).map(a=>{const l=e.getRow(a,!0);return l.getIsAllParentsExpanded()?l:null}):(t??[]).map(a=>o.find(l=>l.id===a))).filter(Boolean).map(a=>({...a,position:n}))},e.getTopRows=x(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(o,t)=>e._getPinnedRows(o,t,"top"),C(e.options,"debugRows")),e.getBottomRows=x(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(o,t)=>e._getPinnedRows(o,t,"bottom"),C(e.options,"debugRows")),e.getCenterRows=x(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(o,t,n)=>{const s=new Set([...t??[],...n??[]]);return o.filter(i=>!s.has(i.id))},C(e.options,"debugRows"))}},Nn={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:N("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=o=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(o),e.resetRowSelection=o=>{var t;return e.setRowSelection(o?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=o=>{e.setRowSelection(t=>{o=typeof o<"u"?o:!e.getIsAllRowsSelected();const n={...t},s=e.getPreGroupedRowModel().flatRows;return o?s.forEach(i=>{i.getCanSelect()&&(n[i.id]=!0)}):s.forEach(i=>{delete n[i.id]}),n})},e.toggleAllPageRowsSelected=o=>e.setRowSelection(t=>{const n=typeof o<"u"?o:!e.getIsAllPageRowsSelected(),s={...t};return e.getRowModel().rows.forEach(i=>{ye(s,i.id,n,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=x(()=>[e.getState().rowSelection,e.getCoreRowModel()],(o,t)=>Object.keys(o).length?Se(e,t):{rows:[],flatRows:[],rowsById:{}},C(e.options,"debugTable")),e.getFilteredSelectedRowModel=x(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(o,t)=>Object.keys(o).length?Se(e,t):{rows:[],flatRows:[],rowsById:{}},C(e.options,"debugTable")),e.getGroupedSelectedRowModel=x(()=>[e.getState().rowSelection,e.getSortedRowModel()],(o,t)=>Object.keys(o).length?Se(e,t):{rows:[],flatRows:[],rowsById:{}},C(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const o=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let n=!!(o.length&&Object.keys(t).length);return n&&o.some(s=>s.getCanSelect()&&!t[s.id])&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=e.getState();let n=!!o.length;return n&&o.some(s=>!t[s.id])&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var o;const t=Object.keys((o=e.getState().rowSelection)!=null?o:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:o.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>o=>{e.toggleAllRowsSelected(o.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>o=>{e.toggleAllPageRowsSelected(o.target.checked)}},createRow:(e,o)=>{e.toggleSelected=(t,n)=>{const s=e.getIsSelected();o.setRowSelection(i=>{var a;if(t=typeof t<"u"?t:!s,e.getCanSelect()&&s===t)return i;const l={...i};return ye(l,e.id,t,(a=n?.selectChildren)!=null?a:!0,o),l})},e.getIsSelected=()=>{const{rowSelection:t}=o.getState();return Ge(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=o.getState();return $e(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=o.getState();return $e(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof o.options.enableRowSelection=="function"?o.options.enableRowSelection(e):(t=o.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof o.options.enableSubRowSelection=="function"?o.options.enableSubRowSelection(e):(t=o.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof o.options.enableMultiRowSelection=="function"?o.options.enableMultiRowSelection(e):(t=o.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var s;t&&e.toggleSelected((s=n.target)==null?void 0:s.checked)}}}},ye=(e,o,t,n,s)=>{var i;const a=s.getRow(o,!0);t?(a.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),a.getCanSelect()&&(e[o]=!0)):delete e[o],n&&(i=a.subRows)!=null&&i.length&&a.getCanSelectSubRows()&&a.subRows.forEach(l=>ye(e,l.id,t,n,s))};function Se(e,o){const t=e.getState().rowSelection,n=[],s={},i=function(a,l){return a.map(u=>{var d;const p=Ge(u,t);if(p&&(n.push(u),s[u.id]=u),(d=u.subRows)!=null&&d.length&&(u={...u,subRows:i(u.subRows)}),p)return u}).filter(Boolean)};return{rows:i(o.rows),flatRows:n,rowsById:s}}function Ge(e,o){var t;return(t=o[e.id])!=null?t:!1}function $e(e,o,t){var n;if(!((n=e.subRows)!=null&&n.length))return!1;let s=!0,i=!1;return e.subRows.forEach(a=>{if(!(i&&!s)&&(a.getCanSelect()&&(Ge(a,o)?i=!0:s=!1),a.subRows&&a.subRows.length)){const l=$e(a,o);l==="all"?i=!0:(l==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const Ve=/([0-9]+)/gm,En=(e,o,t)=>Rt(B(e.getValue(t)).toLowerCase(),B(o.getValue(t)).toLowerCase()),Ln=(e,o,t)=>Rt(B(e.getValue(t)),B(o.getValue(t))),An=(e,o,t)=>ze(B(e.getValue(t)).toLowerCase(),B(o.getValue(t)).toLowerCase()),Hn=(e,o,t)=>ze(B(e.getValue(t)),B(o.getValue(t))),Gn=(e,o,t)=>{const n=e.getValue(t),s=o.getValue(t);return n>s?1:n<s?-1:0},zn=(e,o,t)=>ze(e.getValue(t),o.getValue(t));function ze(e,o){return e===o?0:e>o?1:-1}function B(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Rt(e,o){const t=e.split(Ve).filter(Boolean),n=o.split(Ve).filter(Boolean);for(;t.length&&n.length;){const s=t.shift(),i=n.shift(),a=parseInt(s,10),l=parseInt(i,10),u=[a,l].sort();if(isNaN(u[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(u[1]))return isNaN(a)?-1:1;if(a>l)return 1;if(l>a)return-1}return t.length-n.length}const Z={alphanumeric:En,alphanumericCaseSensitive:Ln,text:An,textCaseSensitive:Hn,datetime:Gn,basic:zn},Tn={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:N("sorting",e),isMultiSortEvent:o=>o.shiftKey}),createColumn:(e,o)=>{e.getAutoSortingFn=()=>{const t=o.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const s of t){const i=s?.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return Z.datetime;if(typeof i=="string"&&(n=!0,i.split(Ve).length>1))return Z.alphanumeric}return n?Z.text:Z.basic},e.getAutoSortDir=()=>{const t=o.getFilteredRowModel().flatRows[0];return typeof t?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,n;if(!e)throw new Error;return ce(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(n=o.options.sortingFns)==null?void 0:n[e.columnDef.sortingFn])!=null?t:Z[e.columnDef.sortingFn]},e.toggleSorting=(t,n)=>{const s=e.getNextSortingOrder(),i=typeof t<"u"&&t!==null;o.setSorting(a=>{const l=a?.find(c=>c.id===e.id),u=a?.findIndex(c=>c.id===e.id);let d=[],p,h=i?t:s==="desc";if(a!=null&&a.length&&e.getCanMultiSort()&&n?l?p="toggle":p="add":a!=null&&a.length&&u!==a.length-1?p="replace":l?p="toggle":p="replace",p==="toggle"&&(i||s||(p="remove")),p==="add"){var g;d=[...a,{id:e.id,desc:h}],d.splice(0,d.length-((g=o.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else p==="toggle"?d=a.map(c=>c.id===e.id?{...c,desc:h}:c):p==="remove"?d=a.filter(c=>c.id!==e.id):d=[{id:e.id,desc:h}];return d})},e.getFirstSortDir=()=>{var t,n;return((t=(n=e.columnDef.sortDescFirst)!=null?n:o.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var n,s;const i=e.getFirstSortDir(),a=e.getIsSorted();return a?a!==i&&((n=o.options.enableSortingRemoval)==null||n)&&(!(t&&(s=o.options.enableMultiRemove)!=null)||s)?!1:a==="desc"?"asc":"desc":i},e.getCanSort=()=>{var t,n;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((n=o.options.enableSorting)!=null?n:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,n;return(t=(n=e.columnDef.enableMultiSort)!=null?n:o.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const n=(t=o.getState().sorting)==null?void 0:t.find(s=>s.id===e.id);return n?n.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,n;return(t=(n=o.getState().sorting)==null?void 0:n.findIndex(s=>s.id===e.id))!=null?t:-1},e.clearSorting=()=>{o.setSorting(t=>t!=null&&t.length?t.filter(n=>n.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return n=>{t&&(n.persist==null||n.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?o.options.isMultiSortEvent==null?void 0:o.options.isMultiSortEvent(n):!1))}}},createTable:e=>{e.setSorting=o=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(o),e.resetSorting=o=>{var t,n;e.setSorting(o?[]:(t=(n=e.initialState)==null?void 0:n.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},On=[an,$n,Rn,jn,un,cn,Vn,Mn,Tn,wn,Pn,Dn,In,Nn,_n];function Bn(e){var o,t;const n=[...On,...(o=e._features)!=null?o:[]];let s={_features:n};const i=s._features.reduce((g,c)=>Object.assign(g,c.getDefaultOptions==null?void 0:c.getDefaultOptions(s)),{}),a=g=>s.options.mergeOptions?s.options.mergeOptions(i,g):{...i,...g};let u={...{},...(t=e.initialState)!=null?t:{}};s._features.forEach(g=>{var c;u=(c=g.getInitialState==null?void 0:g.getInitialState(u))!=null?c:u});const d=[];let p=!1;const h={_features:n,options:{...i,...e},initialState:u,_queue:g=>{d.push(g),p||(p=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();p=!1}).catch(c=>setTimeout(()=>{throw c})))},reset:()=>{s.setState(s.initialState)},setOptions:g=>{const c=O(g,s.options);s.options=a(c)},getState:()=>s.options.state,setState:g=>{s.options.onStateChange==null||s.options.onStateChange(g)},_getRowId:(g,c,f)=>{var m;return(m=s.options.getRowId==null?void 0:s.options.getRowId(g,c,f))!=null?m:`${f?[f.id,c].join("."):c}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(g,c)=>{let f=(c?s.getPrePaginationRowModel():s.getRowModel()).rowsById[g];if(!f&&(f=s.getCoreRowModel().rowsById[g],!f))throw new Error;return f},_getDefaultColumnDef:x(()=>[s.options.defaultColumn],g=>{var c;return g=(c=g)!=null?c:{},{header:f=>{const m=f.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:f=>{var m,v;return(m=(v=f.renderValue())==null||v.toString==null?void 0:v.toString())!=null?m:null},...s._features.reduce((f,m)=>Object.assign(f,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...g}},C(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:x(()=>[s._getColumnDefs()],g=>{const c=function(f,m,v){return v===void 0&&(v=0),f.map(w=>{const F=ln(s,w,v,m),_=w;return F.columns=_.columns?c(_.columns,F,v+1):[],F})};return c(g)},C(e,"debugColumns")),getAllFlatColumns:x(()=>[s.getAllColumns()],g=>g.flatMap(c=>c.getFlatColumns()),C(e,"debugColumns")),_getAllFlatColumnsById:x(()=>[s.getAllFlatColumns()],g=>g.reduce((c,f)=>(c[f.id]=f,c),{}),C(e,"debugColumns")),getAllLeafColumns:x(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(g,c)=>{let f=g.flatMap(m=>m.getLeafColumns());return c(f)},C(e,"debugColumns")),getColumn:g=>s._getAllFlatColumnsById()[g]};Object.assign(s,h);for(let g=0;g<s._features.length;g++){const c=s._features[g];c==null||c.createTable==null||c.createTable(s)}return s}function kn(){return e=>x(()=>[e.options.data],o=>{const t={rows:[],flatRows:[],rowsById:{}},n=function(s,i,a){i===void 0&&(i=0);const l=[];for(let d=0;d<s.length;d++){const p=Ae(e,e._getRowId(s[d],d,a),s[d],d,i,void 0,a?.id);if(t.flatRows.push(p),t.rowsById[p.id]=p,l.push(p),e.options.getSubRows){var u;p.originalSubRows=e.options.getSubRows(s[d],d),(u=p.originalSubRows)!=null&&u.length&&(p.subRows=n(p.originalSubRows,i+1,p))}}return l};return t.rows=n(o),t},C(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Un(e){const o=[],t=n=>{var s;o.push(n),(s=n.subRows)!=null&&s.length&&n.getIsExpanded()&&n.subRows.forEach(t)};return e.rows.forEach(t),{rows:o,flatRows:e.flatRows,rowsById:e.rowsById}}function qn(e,o,t){return t.options.filterFromLeafRows?bn(e,o,t):Kn(e,o,t)}function bn(e,o,t){var n;const s=[],i={},a=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,l=function(u,d){d===void 0&&(d=0);const p=[];for(let g=0;g<u.length;g++){var h;let c=u[g];const f=Ae(t,c.id,c.original,c.index,c.depth,void 0,c.parentId);if(f.columnFilters=c.columnFilters,(h=c.subRows)!=null&&h.length&&d<a){if(f.subRows=l(c.subRows,d+1),c=f,o(c)&&!f.subRows.length){p.push(c),i[c.id]=c,s.push(c);continue}if(o(c)||f.subRows.length){p.push(c),i[c.id]=c,s.push(c);continue}}else c=f,o(c)&&(p.push(c),i[c.id]=c,s.push(c))}return p};return{rows:l(e),flatRows:s,rowsById:i}}function Kn(e,o,t){var n;const s=[],i={},a=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,l=function(u,d){d===void 0&&(d=0);const p=[];for(let g=0;g<u.length;g++){let c=u[g];if(o(c)){var h;if((h=c.subRows)!=null&&h.length&&d<a){const m=Ae(t,c.id,c.original,c.index,c.depth,void 0,c.parentId);m.subRows=l(c.subRows,d+1),c=m}p.push(c),s.push(c),i[c.id]=c}}return p};return{rows:l(e),flatRows:s,rowsById:i}}function Zn(){return e=>x(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(o,t,n)=>{if(!o.rows.length||!(t!=null&&t.length)&&!n){for(let g=0;g<o.flatRows.length;g++)o.flatRows[g].columnFilters={},o.flatRows[g].columnFiltersMeta={};return o}const s=[],i=[];(t??[]).forEach(g=>{var c;const f=e.getColumn(g.id);if(!f)return;const m=f.getFilterFn();m&&s.push({id:g.id,filterFn:m,resolvedValue:(c=m.resolveFilterValue==null?void 0:m.resolveFilterValue(g.value))!=null?c:g.value})});const a=(t??[]).map(g=>g.id),l=e.getGlobalFilterFn(),u=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());n&&l&&u.length&&(a.push("__global__"),u.forEach(g=>{var c;i.push({id:g.id,filterFn:l,resolvedValue:(c=l.resolveFilterValue==null?void 0:l.resolveFilterValue(n))!=null?c:n})}));let d,p;for(let g=0;g<o.flatRows.length;g++){const c=o.flatRows[g];if(c.columnFilters={},s.length)for(let f=0;f<s.length;f++){d=s[f];const m=d.id;c.columnFilters[m]=d.filterFn(c,m,d.resolvedValue,v=>{c.columnFiltersMeta[m]=v})}if(i.length){for(let f=0;f<i.length;f++){p=i[f];const m=p.id;if(p.filterFn(c,m,p.resolvedValue,v=>{c.columnFiltersMeta[m]=v})){c.columnFilters.__global__=!0;break}}c.columnFilters.__global__!==!0&&(c.columnFilters.__global__=!1)}}const h=g=>{for(let c=0;c<a.length;c++)if(g.columnFilters[a[c]]===!1)return!1;return!0};return qn(o.rows,h,e)},C(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Xn(e){return o=>x(()=>[o.getState().pagination,o.getPrePaginationRowModel(),o.options.paginateExpandedRows?void 0:o.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:s,pageIndex:i}=t;let{rows:a,flatRows:l,rowsById:u}=n;const d=s*i,p=d+s;a=a.slice(d,p);let h;o.options.paginateExpandedRows?h={rows:a,flatRows:l,rowsById:u}:h=Un({rows:a,flatRows:l,rowsById:u}),h.flatRows=[];const g=c=>{h.flatRows.push(c),c.subRows.length&&c.subRows.forEach(g)};return h.rows.forEach(g),h},C(o.options,"debugTable"))}function Qn(){return e=>x(()=>[e.getState().sorting,e.getPreSortedRowModel()],(o,t)=>{if(!t.rows.length||!(o!=null&&o.length))return t;const n=e.getState().sorting,s=[],i=n.filter(u=>{var d;return(d=e.getColumn(u.id))==null?void 0:d.getCanSort()}),a={};i.forEach(u=>{const d=e.getColumn(u.id);d&&(a[u.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const l=u=>{const d=u.map(p=>({...p}));return d.sort((p,h)=>{for(let c=0;c<i.length;c+=1){var g;const f=i[c],m=a[f.id],v=m.sortUndefined,w=(g=f?.desc)!=null?g:!1;let F=0;if(v){const _=p.getValue(f.id),E=h.getValue(f.id),j=_===void 0,S=E===void 0;if(j||S){if(v==="first")return j?-1:1;if(v==="last")return j?1:-1;F=j&&S?0:j?v:-v}}if(F===0&&(F=m.sortingFn(p,h,f.id)),F!==0)return w&&(F*=-1),m.invertSorting&&(F*=-1),F}return p.index-h.index}),d.forEach(p=>{var h;s.push(p),(h=p.subRows)!=null&&h.length&&(p.subRows=l(p.subRows))}),d};return{rows:l(t.rows),flatRows:s,rowsById:t.rowsById}},C(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ke(e,o){return e?Wn(e)?R.createElement(e,o):e:null}function Wn(e){return Yn(e)||typeof e=="function"||Jn(e)}function Yn(e){return typeof e=="function"&&(()=>{const o=Object.getPrototypeOf(e);return o.prototype&&o.prototype.isReactComponent})()}function Jn(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function eo(e){const o={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[t]=R.useState(()=>({current:Bn(o)})),[n,s]=R.useState(()=>t.current.initialState);return t.current.setOptions(i=>({...i,...e,state:{...n,...e.state},onStateChange:a=>{s(a),e.onStateChange==null||e.onStateChange(a)}})),t.current}function k(e,o){if(e==null)return{};var t={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(o.indexOf(s)>=0)&&(t[s]=e[s]);return t}var to=["color"],no=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,to);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),oo=["color"],so=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,oo);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),ro=["color"],io=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,ro);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),lo=["color"],ao=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,lo);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),uo=["color"],co=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,uo);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),go=["color"],po=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,go);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),fo=["color"],mo=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,fo);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M5.5 3C4.67157 3 4 3.67157 4 4.5C4 5.32843 4.67157 6 5.5 6C6.32843 6 7 5.32843 7 4.5C7 3.67157 6.32843 3 5.5 3ZM3 5C3.01671 5 3.03323 4.99918 3.04952 4.99758C3.28022 6.1399 4.28967 7 5.5 7C6.71033 7 7.71978 6.1399 7.95048 4.99758C7.96677 4.99918 7.98329 5 8 5H13.5C13.7761 5 14 4.77614 14 4.5C14 4.22386 13.7761 4 13.5 4H8C7.98329 4 7.96677 4.00082 7.95048 4.00242C7.71978 2.86009 6.71033 2 5.5 2C4.28967 2 3.28022 2.86009 3.04952 4.00242C3.03323 4.00082 3.01671 4 3 4H1.5C1.22386 4 1 4.22386 1 4.5C1 4.77614 1.22386 5 1.5 5H3ZM11.9505 10.9976C11.7198 12.1399 10.7103 13 9.5 13C8.28967 13 7.28022 12.1399 7.04952 10.9976C7.03323 10.9992 7.01671 11 7 11H1.5C1.22386 11 1 10.7761 1 10.5C1 10.2239 1.22386 10 1.5 10H7C7.01671 10 7.03323 10.0008 7.04952 10.0024C7.28022 8.8601 8.28967 8 9.5 8C10.7103 8 11.7198 8.8601 11.9505 10.0024C11.9668 10.0008 11.9833 10 12 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H12C11.9833 11 11.9668 10.9992 11.9505 10.9976ZM8 10.5C8 9.67157 8.67157 9 9.5 9C10.3284 9 11 9.67157 11 10.5C11 11.3284 10.3284 12 9.5 12C8.67157 12 8 11.3284 8 10.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),ho=["color"],xo=R.forwardRef(function(e,o){var t=e.color,n=t===void 0?"currentColor":t,s=k(e,ho);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:o}),R.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM7.50003 4C7.77617 4 8.00003 4.22386 8.00003 4.5V7H10.5C10.7762 7 11 7.22386 11 7.5C11 7.77614 10.7762 8 10.5 8H8.00003V10.5C8.00003 10.7761 7.77617 11 7.50003 11C7.22389 11 7.00003 10.7761 7.00003 10.5V8H4.50003C4.22389 8 4.00003 7.77614 4.00003 7.5C4.00003 7.22386 4.22389 7 4.50003 7H7.00003V4.5C7.00003 4.22386 7.22389 4 7.50003 4Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))});function Co({table:e}){const o=e.getState().pagination.pageIndex+1,t=e.getPageCount(),n=yt(o,t);return r.jsxs("div",{className:Y("flex items-center justify-between overflow-clip px-2","@max-2xl/content:flex-col-reverse @max-2xl/content:gap-4"),style:{overflowClipMargin:1},children:[r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium @2xl/content:hidden",children:["Page ",o," of ",t]}),r.jsxs("div",{className:"flex items-center gap-2 @max-2xl/content:flex-row-reverse",children:[r.jsxs(J,{value:`${e.getState().pagination.pageSize}`,onValueChange:s=>{e.setPageSize(Number(s))},children:[r.jsx(ee,{className:"h-8 w-[70px]",children:r.jsx(te,{placeholder:e.getState().pagination.pageSize})}),r.jsx(ne,{side:"top",children:[10,20,30,40,50].map(s=>r.jsx(G,{value:`${s}`,children:s},s))})]}),r.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"})]})]}),r.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[r.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium @max-3xl/content:hidden",children:["Page ",o," of ",t]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(y,{variant:"outline",className:"size-8 p-0 @max-md/content:hidden",onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),children:[r.jsx("span",{className:"sr-only",children:"Go to first page"}),r.jsx(co,{className:"h-4 w-4"})]}),r.jsxs(y,{variant:"outline",className:"size-8 p-0",onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),children:[r.jsx("span",{className:"sr-only",children:"Go to previous page"}),r.jsx(so,{className:"h-4 w-4"})]}),n.map((s,i)=>r.jsx("div",{className:"flex items-center",children:s==="..."?r.jsx("span",{className:"text-muted-foreground px-1 text-sm",children:"..."}):r.jsxs(y,{variant:o===s?"default":"outline",className:"h-8 min-w-8 px-2",onClick:()=>e.setPageIndex(s-1),children:[r.jsxs("span",{className:"sr-only",children:["Go to page ",s]}),s]})},`${s}-${i}`)),r.jsxs(y,{variant:"outline",className:"size-8 p-0",onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),children:[r.jsx("span",{className:"sr-only",children:"Go to next page"}),r.jsx(io,{className:"h-4 w-4"})]}),r.jsxs(y,{variant:"outline",className:"size-8 p-0 @max-md/content:hidden",onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),children:[r.jsx("span",{className:"sr-only",children:"Go to last page"}),r.jsx(po,{className:"h-4 w-4"})]})]})]})]})}function vo({column:e,title:o,options:t}){const n=e?.getFacetedUniqueValues(),s=new Set(e?.getFilterValue());return r.jsxs(De,{children:[r.jsx(Ie,{asChild:!0,children:r.jsxs(y,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[r.jsx(xo,{className:"size-4"}),o,s?.size>0&&r.jsxs(r.Fragment,{children:[r.jsx(Pt,{orientation:"vertical",className:"mx-2 h-4"}),r.jsx(ae,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:s.size}),r.jsx("div",{className:"hidden space-x-1 lg:flex",children:s.size>2?r.jsxs(ae,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[s.size," selected"]}):t.filter(i=>s.has(i.value)).map(i=>r.jsx(ae,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:i.label},i.value))})]})]})}),r.jsx(Ne,{className:"w-[200px] p-0",align:"start",children:r.jsxs(Tt,{children:[r.jsx(Ot,{placeholder:o}),r.jsxs(Bt,{children:[r.jsx(kt,{children:"No results found."}),r.jsx(Oe,{children:t.map(i=>{const a=s.has(i.value);return r.jsxs(Be,{onSelect:()=>{a?s.delete(i.value):s.add(i.value);const l=Array.from(s);e?.setFilterValue(l.length?l:void 0)},children:[r.jsx("div",{className:Y("border-primary flex size-4 items-center justify-center rounded-sm border",a?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:r.jsx(no,{className:Y("text-background h-4 w-4")})}),i.icon&&r.jsx(i.icon,{className:"text-muted-foreground size-4"}),r.jsx("span",{children:i.label}),n?.get(i.value)&&r.jsx("span",{className:"ms-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:n.get(i.value)})]},i.value)})}),s.size>0&&r.jsxs(r.Fragment,{children:[r.jsx(Ut,{}),r.jsx(Oe,{children:r.jsx(Be,{onSelect:()=>e?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function wo({table:e}){return r.jsxs(Je,{modal:!1,children:[r.jsx(qt,{asChild:!0,children:r.jsxs(y,{variant:"outline",size:"sm",className:"ms-auto hidden h-8 lg:flex",children:[r.jsx(mo,{className:"size-4"}),"View"]})}),r.jsxs(et,{align:"end",className:"w-[150px]",children:[r.jsx(tt,{children:"Toggle columns"}),r.jsx(nt,{}),e.getAllColumns().filter(o=>typeof o.accessorFn<"u"&&o.getCanHide()).map(o=>r.jsx(bt,{className:"capitalize",checked:o.getIsVisible(),onCheckedChange:t=>o.toggleVisibility(!!t),children:o.id},o.id))]})]})}function So({table:e,searchPlaceholder:o="Filter...",searchKey:t,filters:n=[]}){const s=e.getState().columnFilters.length>0||e.getState().globalFilter;return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[t?r.jsx(A,{placeholder:o,value:e.getColumn(t)?.getFilterValue()??"",onChange:i=>e.getColumn(t)?.setFilterValue(i.target.value),className:"h-8 w-[150px] lg:w-[250px]"}):r.jsx(A,{placeholder:o,value:e.getState().globalFilter??"",onChange:i=>e.setGlobalFilter(i.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),r.jsx("div",{className:"flex gap-x-2",children:n.map(i=>{const a=e.getColumn(i.columnId);return a?r.jsx(vo,{column:a,title:i.title,options:i.options},i.columnId):null})}),s&&r.jsxs(y,{variant:"ghost",onClick:()=>{e.resetColumnFilters(),e.setGlobalFilter("")},className:"h-8 px-2 lg:px-3",children:["Reset",r.jsx(ao,{className:"ms-2 h-4 w-4"})]})]}),r.jsx(wo,{table:e})]})}function Ro({table:e,columns:o,isLoading:t=!1,searchKey:n,searchPlaceholder:s}){return r.jsxs("div",{className:"space-y-4",children:[r.jsx(So,{table:e,searchKey:n,searchPlaceholder:s}),r.jsx("div",{className:"rounded-md border",children:r.jsxs(Xt,{children:[r.jsx(Qt,{children:e.getHeaderGroups().map(i=>r.jsx(se,{children:i.headers.map(a=>r.jsx(Wt,{children:a.isPlaceholder?null:Ke(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),r.jsx(Yt,{children:t?Array.from({length:5}).map((i,a)=>r.jsx(se,{children:o.map((l,u)=>r.jsx(fe,{children:r.jsx("div",{className:"h-4 bg-muted animate-pulse rounded"})},u))},a)):e.getRowModel().rows?.length?e.getRowModel().rows.map(i=>r.jsx(se,{"data-state":i.getIsSelected()&&"selected",children:i.getVisibleCells().map(a=>r.jsx(fe,{children:Ke(a.column.columnDef.cell,a.getContext())},a.id))},i.id)):r.jsx(se,{children:r.jsx(fe,{colSpan:o.length,className:"h-24 text-center",children:"No results."})})})]})}),r.jsx(Co,{table:e})]})}function jo({onEdit:e}){const o=Me(),[t,n]=R.useState([]),[s,i]=R.useState([]),[a,l]=R.useState({}),[u,d]=R.useState({}),[p,h]=Dt(!1),[g,c]=R.useState(null),{data:f=[],isLoading:m,error:v}=Qe({queryKey:["coupons"],queryFn:oe.list}),w=Pe({mutationFn:oe.delete,onSuccess:()=>{o.invalidateQueries({queryKey:["coupons"]}),T.success("Coupon deleted successfully!"),h(!1),c(null)},onError:j=>{T.error(j.response?.data?.error||"Failed to delete coupon")}}),F=R.useMemo(()=>[{accessorKey:"code",header:"Code",cell:({row:j})=>{const S=j.getValue("code");return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-mono font-medium",children:S}),r.jsx(y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(S),T.success("Code copied to clipboard!")},children:r.jsx(ke,{className:"h-3 w-3"})})]})}},{accessorKey:"user.fullName",header:"User",cell:({row:j})=>{const S=j.original.user;return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium",children:S.fullName}),r.jsx("span",{className:"text-sm text-muted-foreground",children:S.email})]})}},{accessorKey:"userDiscount",header:"User Discount",cell:({row:j})=>{const S=j.original.userDiscount,U=S.type==="percentage"?je:Ue;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{className:"font-medium",children:[S.value,S.type==="percentage"?"%":"$"]})]})}},{accessorKey:"userCommission",header:"Commission",cell:({row:j})=>{const S=j.original.userCommission,U=S.type==="percentage"?je:Ue;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U,{className:"h-4 w-4 text-blue-600"}),r.jsxs("span",{className:"font-medium",children:[S.value,S.type==="percentage"?"%":"$"]})]})}},{accessorKey:"usageCount",header:"Usage",cell:({row:j})=>{const S=j.original,z=S.usageCount/S.maxUsage*100;return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("span",{className:"text-sm font-medium",children:[S.usageCount," / ",S.maxUsage]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(z,100)}%`}})})]})}},{accessorKey:"applicableSubscriptions",header:"Subscriptions",cell:({row:j})=>{const S=j.original.applicableSubscriptions;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ot,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{className:"text-sm",children:[S.length," plans"]})]})}},{accessorKey:"expirationDate",header:"Expires",cell:({row:j})=>{const S=new Date(j.getValue("expirationDate")),z=S<new Date;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:z?"text-red-600":"",children:Le(S,"MMM dd, yyyy")})]})}},{accessorKey:"isActive",header:"Status",cell:({row:j})=>{const S=j.getValue("isActive");return r.jsx(ae,{variant:S?"default":"secondary",children:S?"Active":"Inactive"})}},{id:"actions",enableHiding:!1,cell:({row:j})=>{const S=j.original;return r.jsxs(Je,{children:[r.jsx(Kt,{asChild:!0,children:r.jsxs(y,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:"Open menu"}),r.jsx(Gt,{className:"h-4 w-4"})]})}),r.jsxs(et,{align:"end",children:[r.jsx(tt,{children:"Actions"}),r.jsxs(pe,{onClick:()=>{navigator.clipboard.writeText(S.code),T.success("Coupon code copied!")},children:[r.jsx(ke,{className:"mr-2 h-4 w-4"}),"Copy code"]}),r.jsx(nt,{}),r.jsxs(pe,{onClick:()=>e(S),children:[r.jsx(We,{className:"mr-2 h-4 w-4"}),"Edit"]}),r.jsxs(pe,{onClick:()=>{c(S),h(!0)},className:"text-red-600",children:[r.jsx(zt,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}}],[e,h]),_=eo({data:f,columns:F,onSortingChange:n,onColumnFiltersChange:i,getCoreRowModel:kn(),getPaginationRowModel:Xn(),getSortedRowModel:Qn(),getFilteredRowModel:Zn(),onColumnVisibilityChange:l,onRowSelectionChange:d,state:{sorting:t,columnFilters:s,columnVisibility:a,rowSelection:u}}),E=()=>{g&&w.mutate(g._id)};return v?r.jsx(q,{children:r.jsxs(b,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Re,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Failed to load coupons"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"There was an error loading the coupons data."})]})}):r.jsxs(r.Fragment,{children:[r.jsxs(q,{children:[r.jsx(X,{children:r.jsx(Q,{children:"Coupons"})}),r.jsx(b,{children:r.jsx(Ro,{table:_,columns:F,isLoading:m,searchKey:"code",searchPlaceholder:"Search by coupon code..."})})]}),r.jsx(It,{open:!!p,onOpenChange:j=>h(!!j),handleConfirm:E,title:"Delete Coupon",desc:`Are you sure you want to delete the coupon "${g?.code}"? This action cannot be undone.`,confirmText:"Delete",cancelBtnText:"Cancel",isLoading:w.isPending,destructive:!0})]})}const jt=Ze({code:ge().min(1,"Code is required").max(50,"Code must be less than 50 characters"),userCommissionValue:de().min(0,"Commission value must be positive"),userCommissionType:ue(["fixed","percentage"]),userDiscountValue:de().min(0,"Discount value must be positive"),userDiscountType:ue(["fixed","percentage"]),applicableSubscriptions:$t(ge()).optional(),expirationDate:ge().min(1,"Expiration date is required"),isActive:Xe(),maxUsage:de().min(1,"Max usage must be at least 1")});Ze({isActive:Xe().optional(),userCommissionType:ue(["fixed","percentage"]).optional(),userDiscountType:ue(["fixed","percentage"]).optional()});function Fo({children:e}){const o=Me(),[t,n]=R.useState(!1),s=ct({resolver:dt(jt),defaultValues:{code:"",userCommissionValue:0,userCommissionType:"percentage",userDiscountValue:0,userDiscountType:"percentage",applicableSubscriptions:[],expirationDate:"",isActive:!0,maxUsage:100}}),i=Pe({mutationFn:l=>oe.create(l),onSuccess:()=>{o.invalidateQueries({queryKey:["coupons"]}),T.success("Coupon created successfully!"),n(!1),s.reset()},onError:l=>{const u=l.response?.data?.error||"Failed to create coupon";T.error(u)}}),a=l=>{const u={code:l.code,userCommissionValue:l.userCommissionValue,userCommissionType:l.userCommissionType,userDiscountValue:l.userDiscountValue,userDiscountType:l.userDiscountType,applicableSubscriptions:l.applicableSubscriptions,expirationDate:l.expirationDate,isActive:l.isActive,maxUsage:l.maxUsage};i.mutate(u)};return r.jsxs(st,{open:t,onOpenChange:n,children:[r.jsx(Zt,{asChild:!0,children:e||r.jsxs(y,{children:[r.jsx(en,{className:"mr-2 h-4 w-4"}),"Create Coupon"]})}),r.jsxs(rt,{className:"sm:max-w-[600px]",children:[r.jsxs(it,{children:[r.jsx(lt,{children:"Create New Coupon"}),r.jsx(at,{children:"Create a new coupon with discount and commission settings."})]}),r.jsx(Ye,{...s,children:r.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(V,{control:s.control,name:"code",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Coupon Code"}),r.jsx(D,{children:r.jsx(A,{placeholder:"SUMMER2025",...l})}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"maxUsage",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Max Usage"}),r.jsx(D,{children:r.jsx(A,{type:"number",placeholder:"100",...l,onChange:u=>l.onChange(Number(u.target.value))})}),r.jsx(I,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-sm font-medium",children:"User Discount"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(V,{control:s.control,name:"userDiscountValue",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Value"}),r.jsx(D,{children:r.jsx(A,{type:"number",placeholder:"25",...l,onChange:u=>l.onChange(Number(u.target.value))})}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"userDiscountType",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Type"}),r.jsxs(J,{onValueChange:l.onChange,defaultValue:l.value,children:[r.jsx(D,{children:r.jsx(ee,{children:r.jsx(te,{placeholder:"Select type"})})}),r.jsxs(ne,{children:[r.jsx(G,{value:"percentage",children:"Percentage"}),r.jsx(G,{value:"fixed",children:"Fixed"})]})]}),r.jsx(I,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-sm font-medium",children:"User Commission"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(V,{control:s.control,name:"userCommissionValue",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Value"}),r.jsx(D,{children:r.jsx(A,{type:"number",placeholder:"10",...l,onChange:u=>l.onChange(Number(u.target.value))})}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"userCommissionType",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Type"}),r.jsxs(J,{onValueChange:l.onChange,defaultValue:l.value,children:[r.jsx(D,{children:r.jsx(ee,{children:r.jsx(te,{placeholder:"Select type"})})}),r.jsxs(ne,{children:[r.jsx(G,{value:"percentage",children:"Percentage"}),r.jsx(G,{value:"fixed",children:"Fixed"})]})]}),r.jsx(I,{})]})})]})]})]}),r.jsx(V,{control:s.control,name:"expirationDate",render:({field:l})=>r.jsxs(M,{className:"flex flex-col",children:[r.jsx(P,{children:"Expiration Date"}),r.jsxs(De,{children:[r.jsx(Ie,{asChild:!0,children:r.jsx(D,{children:r.jsxs(y,{variant:"outline",className:Y("w-full pl-3 text-left font-normal",!l.value&&"text-muted-foreground"),children:[l.value?Le(new Date(l.value),"PPP"):r.jsx("span",{children:"Pick a date"}),r.jsx(Ee,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(Ne,{className:"w-auto p-0",align:"start",children:r.jsx(pt,{mode:"single",selected:l.value?new Date(l.value):void 0,onSelect:u=>{u&&l.onChange(u.toISOString())},disabled:u=>u<new Date,initialFocus:!0})})]}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"isActive",render:({field:l})=>r.jsxs(M,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(P,{className:"text-base",children:"Active Status"}),r.jsx(I,{})]}),r.jsx(D,{children:r.jsx(gt,{checked:l.value,onCheckedChange:l.onChange})})]})}),r.jsxs(ut,{children:[r.jsx(y,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),r.jsx(y,{type:"submit",disabled:i.isPending,children:i.isPending?"Creating...":"Create Coupon"})]})]})})]})]})}function _o({coupon:e,isOpen:o,onClose:t}){const n=Me(),s=ct({resolver:dt(jt),defaultValues:{code:"",userCommissionValue:0,userCommissionType:"percentage",userDiscountValue:0,userDiscountType:"percentage",applicableSubscriptions:[],expirationDate:"",isActive:!0,maxUsage:100}});R.useEffect(()=>{e&&s.reset({code:e.code,userCommissionValue:e.userCommission.value,userCommissionType:e.userCommission.type,userDiscountValue:e.userDiscount.value,userDiscountType:e.userDiscount.type,applicableSubscriptions:e.applicableSubscriptions.map(l=>l._id),expirationDate:e.expirationDate,isActive:e.isActive,maxUsage:e.maxUsage})},[e,s]);const i=Pe({mutationFn:({id:l,data:u})=>oe.update(l,u),onSuccess:()=>{n.invalidateQueries({queryKey:["coupons"]}),T.success("Coupon updated successfully!"),t()},onError:l=>{const u=l.response?.data?.error||"Failed to update coupon";T.error(u)}}),a=l=>{if(!e)return;const u={code:l.code,userCommissionValue:l.userCommissionValue,userCommissionType:l.userCommissionType,userDiscountValue:l.userDiscountValue,userDiscountType:l.userDiscountType,applicableSubscriptions:l.applicableSubscriptions,expirationDate:l.expirationDate,isActive:l.isActive,maxUsage:l.maxUsage};i.mutate({id:e._id,data:u})};return e?r.jsx(st,{open:o,onOpenChange:t,children:r.jsxs(rt,{className:"sm:max-w-[600px]",children:[r.jsxs(it,{children:[r.jsxs(lt,{className:"flex items-center gap-2",children:[r.jsx(We,{className:"h-5 w-5"}),"Edit Coupon"]}),r.jsx(at,{children:"Update the coupon settings. Changes will be applied immediately."})]}),r.jsx(Ye,{...s,children:r.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(V,{control:s.control,name:"code",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Coupon Code"}),r.jsx(D,{children:r.jsx(A,{placeholder:"SUMMER2025",...l})}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"maxUsage",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Max Usage"}),r.jsx(D,{children:r.jsx(A,{type:"number",placeholder:"100",...l,onChange:u=>l.onChange(Number(u.target.value))})}),r.jsx(I,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-sm font-medium",children:"User Discount"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(V,{control:s.control,name:"userDiscountValue",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Value"}),r.jsx(D,{children:r.jsx(A,{type:"number",placeholder:"25",...l,onChange:u=>l.onChange(Number(u.target.value))})}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"userDiscountType",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Type"}),r.jsxs(J,{onValueChange:l.onChange,value:l.value,children:[r.jsx(D,{children:r.jsx(ee,{children:r.jsx(te,{placeholder:"Select type"})})}),r.jsxs(ne,{children:[r.jsx(G,{value:"percentage",children:"Percentage"}),r.jsx(G,{value:"fixed",children:"Fixed"})]})]}),r.jsx(I,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-sm font-medium",children:"User Commission"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(V,{control:s.control,name:"userCommissionValue",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Value"}),r.jsx(D,{children:r.jsx(A,{type:"number",placeholder:"10",...l,onChange:u=>l.onChange(Number(u.target.value))})}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"userCommissionType",render:({field:l})=>r.jsxs(M,{children:[r.jsx(P,{children:"Type"}),r.jsxs(J,{onValueChange:l.onChange,value:l.value,children:[r.jsx(D,{children:r.jsx(ee,{children:r.jsx(te,{placeholder:"Select type"})})}),r.jsxs(ne,{children:[r.jsx(G,{value:"percentage",children:"Percentage"}),r.jsx(G,{value:"fixed",children:"Fixed"})]})]}),r.jsx(I,{})]})})]})]})]}),r.jsx(V,{control:s.control,name:"expirationDate",render:({field:l})=>r.jsxs(M,{className:"flex flex-col",children:[r.jsx(P,{children:"Expiration Date"}),r.jsxs(De,{children:[r.jsx(Ie,{asChild:!0,children:r.jsx(D,{children:r.jsxs(y,{variant:"outline",className:Y("w-full pl-3 text-left font-normal",!l.value&&"text-muted-foreground"),children:[l.value?Le(new Date(l.value),"PPP"):r.jsx("span",{children:"Pick a date"}),r.jsx(Ee,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(Ne,{className:"w-auto p-0",align:"start",children:r.jsx(pt,{mode:"single",selected:l.value?new Date(l.value):void 0,onSelect:u=>{u&&l.onChange(u.toISOString())},disabled:u=>u<new Date,initialFocus:!0})})]}),r.jsx(I,{})]})}),r.jsx(V,{control:s.control,name:"isActive",render:({field:l})=>r.jsxs(M,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(P,{className:"text-base",children:"Active Status"}),r.jsx(I,{})]}),r.jsx(D,{children:r.jsx(gt,{checked:l.value,onCheckedChange:l.onChange})})]})}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Usage Statistics"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsxs("p",{children:["Current usage: ",e.usageCount," / ",e.maxUsage]}),r.jsxs("p",{children:["Created by: ",e.user.fullName]})]})]}),r.jsxs(ut,{children:[r.jsx(y,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(y,{type:"submit",disabled:i.isPending,children:i.isPending?"Updating...":"Update Coupon"})]})]})})]})}):null}function yo(){const[e,o]=R.useState(null),{data:t=[]}=Qe({queryKey:["coupons"],queryFn:oe.list}),n={total:t.length,active:t.filter(a=>a.isActive).length,totalUsage:t.reduce((a,l)=>a+l.usageCount,0),averageDiscount:t.length>0?t.reduce((a,l)=>a+l.userDiscount.value,0)/t.length:0},s=a=>{o(a)},i=()=>{o(null)};return r.jsxs(r.Fragment,{children:[r.jsxs(Nt,{children:[r.jsx(Vt,{links:$o}),r.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[r.jsx(Et,{}),r.jsx(Lt,{}),r.jsx(At,{}),r.jsx(Ht,{})]})]}),r.jsxs(Mt,{children:[r.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Coupon Management"}),r.jsx("p",{className:"text-muted-foreground text-lg",children:"Create and manage discount coupons and commission settings"})]}),r.jsx(Fo,{})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[r.jsxs(q,{children:[r.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Q,{className:"text-sm font-medium",children:"Total Coupons"}),r.jsx(Re,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(b,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.total}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.active," active"]})]})]}),r.jsxs(q,{children:[r.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Q,{className:"text-sm font-medium",children:"Active Coupons"}),r.jsx(tn,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(b,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.active}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.total-n.active," inactive"]})]})]}),r.jsxs(q,{children:[r.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Q,{className:"text-sm font-medium",children:"Total Usage"}),r.jsx(ot,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(b,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.totalUsage}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Times coupons were used"})]})]}),r.jsxs(q,{children:[r.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Q,{className:"text-sm font-medium",children:"Avg. Discount"}),r.jsx(je,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(b,{children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[n.averageDiscount.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Average discount value"})]})]})]}),r.jsx(jo,{onEdit:s}),r.jsx(_o,{coupon:e,isOpen:!!e,onClose:i})]})]})}const $o=[{title:"Coupons",href:"/coupons",isActive:!0,disabled:!1},{title:"Analytics",href:"/coupons/analytics",isActive:!1,disabled:!0},{title:"Settings",href:"/coupons/settings",isActive:!1,disabled:!0}],Wo=()=>r.jsx(yo,{});export{Wo as component};
