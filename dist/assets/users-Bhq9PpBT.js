import{r as d,j as e,B as o,c as S}from"./index-Btg6gnLu.js";import{u as L}from"./useQuery-Bl37N1WJ.js";import{C as c,a as m,b as x,d as h}from"./card-CdcetJNB.js";import{e as H,s as I,C as O,a as $}from"./calendar-B2ORgpPQ.js";import{P as F,a as A,b as B}from"./popover-g0zHHnR-.js";import{T as E,a as q,b,c as f,d as z,e as j}from"./table-ufLinNDf.js";import{a as K}from"./analytics-api-CmQYyEWo.js";import{H as Q,S as V,T as _,C as G,P as J}from"./config-drawer-Cw3rPP3V.js";import{T as W,M as X}from"./top-nav-CH4IYEH5.js";import{C as y}from"./calendar-B9IkSMYI.js";import{U as p,C as Y}from"./sidebar-CXRlwwd3.js";import{M as Z}from"./mail-Cunpbm9q.js";import{P as ee}from"./phone-CBSPvWSv.js";import{f as r}from"./format-Dp3w_Y3x.js";import"./createLucideIcon-olB1fVOM.js";import"./chevron-down-vqXryJlO.js";import"./dropdown-menu-34yjp3fY.js";import"./api-DvMRX4-2.js";import"./index-_CXJfNKi.js";import"./zehnly-auth-api-BOg6QHLO.js";function se(){const[a,C]=d.useState({from:I(new Date),to:H(new Date)}),[M,g]=d.useState(!1),[i,u]=d.useState(0),[n]=d.useState(50),N=r(a.from,"yyyy-MM-dd"),w=r(a.to,"yyyy-MM-dd"),{data:t,isLoading:l,refetch:D}=L({queryKey:["new-users-in-range",N,w,i,n],queryFn:()=>K.getNewUsersInRange({startDate:N,endDate:w,limit:n,skip:i*n})}),P=()=>{D()},U=s=>{C(s),u(0)},T=()=>{u(s=>Math.max(0,s-1))},R=()=>{t?.data.pagination?.hasMore&&u(s=>s+1)},v=s=>s.fullName?s.fullName:s.firstName?s.firstName:s.email?s.email.split("@")[0]:s.phone?s.phone:`User ${s.userId.slice(-6)}`;return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(W,{links:te}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(V,{}),e.jsx(_,{}),e.jsx(G,{}),e.jsx(J,{})]})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Users"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"View all new user registrations in the selected date range"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(F,{open:M,onOpenChange:g,children:[e.jsx(A,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:S("w-[300px] justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),a?`${r(a.from,"LLL dd, y")} - ${r(a.to,"LLL dd, y")}`:"Pick a date range"]})}),e.jsx(B,{className:"w-auto p-0",align:"start",children:e.jsx(O,{initialFocus:!0,mode:"range",defaultMonth:a?.from,selected:a,onSelect:s=>{s?.from&&s?.to&&(U({from:s.from,to:s.to}),g(!1))},numberOfMonths:2})})]}),e.jsx(o,{onClick:P,variant:"outline",disabled:l,children:l?"Refreshing...":"Refresh"})]})]}),t?.data&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 mb-6",children:[e.jsxs(c,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total Users Found"}),e.jsx(p,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.data.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In selected date range"})]})]}),e.jsxs(c,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Showing"}),e.jsx(p,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.data.count}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users on this page"})]})]}),e.jsxs(c,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Date Range"}),e.jsx(y,{className:"h-4 w-4 text-purple-500"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[r(new Date(t.data.startDate),"MMM dd")," - ",r(new Date(t.data.endDate),"MMM dd")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Selected range"})]})]})]}),e.jsxs(c,{children:[e.jsx(m,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"New Users"]}),t?.data.total&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.data.total," total users"]})]})}),e.jsxs(h,{children:[l?e.jsx("div",{className:"space-y-3",children:Array.from({length:10}).map((s,k)=>e.jsxs("div",{className:"flex items-center space-x-4 p-3",children:[e.jsx("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-4 w-48 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})]},k))}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(E,{children:[e.jsx(q,{children:e.jsxs(b,{children:[e.jsx(f,{children:"User"}),e.jsx(f,{children:"Contact"}),e.jsx(f,{children:"Registration Date"}),e.jsx(f,{children:"User ID"})]})}),e.jsx(z,{children:t?.data.users?.map(s=>e.jsxs(b,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:v(s)[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:v(s)}),s.fullName&&s.firstName&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.firstName," ",s.lastName]})]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-1",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{className:"text-sm",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{className:"text-sm",children:s.phone})]}),!s.email&&!s.phone&&e.jsx("span",{className:"text-muted-foreground text-sm",children:"No contact info"})]})}),e.jsx(j,{className:"text-sm",children:e.jsxs("div",{children:[e.jsx("div",{children:r(new Date(s.registrationDate),"MMM dd, yyyy")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r(new Date(s.registrationDate),"HH:mm")})]})}),e.jsx(j,{className:"font-mono text-xs",children:s.userId.slice(-8)})]},s.userId))})]}),t?.data.users?.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(p,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No users found for the selected date range"})]})]}),t?.data.pagination&&t.data.total>n&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",i*n+1,"-",Math.min((i+1)*n,t.data.total)," of ",t.data.total," users"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:T,disabled:i===0||l,children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",i+1," of ",Math.ceil(t.data.total/n)]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:R,disabled:!t.data.pagination.hasMore||l,children:["Next",e.jsx(Y,{className:"h-4 w-4 ml-1"})]})]})]})]})]})]})]})}const te=[{title:"Users",href:"/users",isActive:!0,disabled:!1}];function ye(){return e.jsx(se,{})}export{ye as component};
